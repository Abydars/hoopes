jQuery(document).ready(function(){jQuery('#add-secondary-insurance').on('click',function(){var num=jQuery('.company').length+1;var $clone=jQuery('#insurance-company').clone().addClass('company').attr('id','insurance-company-'+num).val('');$clone.find('.insurance-company-label').html('Secondary Insurance Company');$clone.find('.insurance-company-animate').html('Secondary Insurance Company');var $inputs=$clone.find(':input');jQuery.each($inputs,function(i,v){var name=jQuery(this).attr('name');jQuery(this).attr('name',name+'_'+num).val('');});var selector=num-1;if(selector==1){$clone.insertAfter('#insurance-company');}else{$clone.insertAfter('#insurance-company-'+selector);}});jQuery('#add-medication').on('click',function(){var num=jQuery('.medication').length+1;var name=jQuery('#medication').attr('name');var $clone=jQuery('#medication').clone().addClass('medication').attr('id','medication-'+num).attr('name',name+'_'+num).val('');var selector=num-1;if(selector==1){$clone.insertAfter('#medication');}else{$clone.insertAfter('#medication-'+selector);}});jQuery('#add-allergy').on('click',function(){var num=jQuery('.allergy').length+1;var name=jQuery('#allergy').attr('name');var $clone=jQuery('#allergy').clone().addClass('allergy').attr('id','allergy-'+num).attr('name',name+'_'+num).val('');var selector=num-1;if(selector==1){$clone.insertAfter('#allergy');}else{$clone.insertAfter('#allergy-'+selector);}});jQuery('#add-eye-disorder').on('click',function(){var num=jQuery('.eye-disorder').length+1;var name=jQuery('#eye-disorder').attr('name');var $clone=jQuery('#eye-disorder').clone().addClass('eye-disorder').attr('id','eye-disorder-'+num).attr('name',name+'_'+num).val('');var selector=num-1;if(selector==1){$clone.insertAfter('#eye-disorder');}else{$clone.insertAfter('#eye-disorder-'+selector);}});jQuery('#add-other-eye-problems').on('click',function(){var num=jQuery('.other-eye-problems').length+1;var name=jQuery('#other-eye-problems').attr('name');var $clone=jQuery('#other-eye-problems').clone().addClass('other-eye-problems').attr('id','other-eye-problems-'+num).attr('name',name+'_'+num).val('');var selector=num-1;if(selector==1){$clone.insertAfter('#other-eye-problems');}else{$clone.insertAfter('#other-eye-problems-'+selector);}});jQuery('#add-other-general-problems').on('click',function(){var num=jQuery('.other-general-problems').length+1;var name=jQuery('#other-general-problems').attr('name');var $clone=jQuery('#other-general-problems').clone().addClass('other-general-problems').attr('id','other-general-problems-'+num).attr('name',name+'_'+num).val('');var selector=num-1;if(selector==1){$clone.insertAfter('#other-general-problems');}else{$clone.insertAfter('#other-general-problems-'+selector);}});jQuery('#add-surgery').on('click',function(){var num=jQuery('.surgery').length+1;var $clone=jQuery('#surgery').clone().attr('id','surgery-'+num);$clone.find('.surgery-date').attr('name','surgery_date_'+num).val('');$clone.find('.surgery-type').attr('name','surgery_type_'+num).val('');$clone.find('.surgery-date').addClass('date');var selector=num-1;if(selector==1){$clone.insertAfter('#surgery');}else{$clone.insertAfter('#surgery-'+selector);}});jQuery('.referred_by').on('click',function(){var $class=jQuery(this).attr('id');jQuery('.'+$class).show();});if(jQuery('#accordion').length){var $accordion=jQuery("#accordion").accordion({collapsible:true,heightStyle:"content"});}
jQuery(".patient-form-2").unbind('click');jQuery(".patient-form-3").unbind('click');if(jQuery.datepicker)
{var isIE=0<jQuery('html.no-js').length;jQuery('.date').datepicker({changeMonth:true,changeYear:true,yearRange:"-100:+0",fixFocusIE:false,onSelect:function(dateText,inst){this.fixFocusIE=true;},onClose:function(dateText,inst){this.fixFocusIE=true;},beforeShow:function(input,inst){var result=isIE?!this.fixFocusIE:true;this.fixFocusIE=false;return result;}});}
function openNextAccordionPanel(){var current=$accordion.accordion("option","active"),maximum=$accordion.find("h5").length,next=current+1===maximum?0:current+1;var nowOpen=$accordion.accordion("option","active",next);jQuery('html, body').animate({scrollTop:jQuery(nowOpen).offset().top},2000);}
function closeCurrentAccordionPanel(){var current=$accordion.accordion("option","active");$accordion.accordion("option","active",false);}
jQuery('.patient-form-next').on('click',function(e){var form=jQuery(".patient-form");form.validate({onkeyup:function(element){this.element(element);},onfocusout:function(element){this.element(element);},invalidHandler:function(form,validator){if(!validator.numberOfInvalids())
return;jQuery('html, body').animate({scrollTop:jQuery(validator.errorList[0].element).offset().top},2000);}});jQuery.validator.addMethod("ss",function(value,element){return this.optional(element)||/^[0-9\-]+$/i.test(value);},"SSN must contain only numbers and -.");if(form.valid()==true){openNextAccordionPanel();}
return false;});jQuery('#accordion .pdf').on('click',function(e){var href=jQuery(this).attr('href');window.location=href;return false;});jQuery('.na-checkbox').on('click',function(e){var self=jQuery(this);var h5=self.parents('.na-info');var content=h5.next('.na-info-content');if(self.is(':checked')){content.hide();}else{content.show();}});jQuery('.self-checkbox').on('click',function(e){var self=jQuery(this),firstName=jQuery('input[name=responsible_party_first_name]'),middleName=jQuery('input[name=responsible_party_middle_name]'),lastName=jQuery('input[name=responsible_party_last_name]'),address=jQuery('input[name=responsible_party_address]'),dob=jQuery('input[name=responsible_party_date_of_birth]'),ss=jQuery('input[name=responsible_party_social_security_number]'),gender=jQuery('select[name=responsible_party_gender]'),phone=jQuery('input[name=responsible_party_phone]'),workPhone=jQuery('input[name=responsible_party_work_phone]'),email=jQuery('input[name=responsible_party_email]'),company=jQuery('input[name=responsible_party_company]'),city=jQuery('input[name=responsible_party_city]');if(self.is(':checked')){firstName.val(jQuery('input[name=first_name]').val());middleName.val(jQuery('input[name=middle_name]').val());lastName.val(jQuery('input[name=last_name]').val());address.val(jQuery('input[name=street_address]').val());phone.val(jQuery('input[name=home_phone]').val());dob.val(jQuery('input[name=date_of_birth]').val());ss.val(jQuery('input[name=social_security_number]').val());gender.val(jQuery('select[name=gender]').val());workPhone.val(jQuery('input[name=work_phone]').val());email.val(jQuery('input[name=email]').val());company.val(jQuery('input[name=patient_employer_company]').val());city.val(jQuery('input[name=patient_employer_city]').val());}else{firstName.val('');middleName.val('');lastName.val('');address.val('');phone.val('');dob.val('');ss.val('');gender.val('Male');workPhone.val('');email.val('');company.val('');city.val('');}});jQuery('input[type=tel]').on('blur',function(e){var obj=this;var numbers=obj.value.replace(/\D/g,''),char={0:'(',3:') ',6:'-'};obj.value='';for(var i=0;i<numbers.length;i++){obj.value+=(char[i]||'')+numbers[i];}});var chk=jQuery('input[type="checkbox"]');chk.each(function(){var v=jQuery(this).attr('checked')=='checked'?1:0;jQuery(this).parent().after('<input type="hidden" name="'+jQuery(this).attr('name')+'_cbx" value="'+v+'" />');});chk.change(function(){var v=jQuery(this).is(':checked')?1:0;jQuery(this).parent().next('input[type="hidden"]').val(v);});jQuery('.patient-form-submit').on('click',function(e){var lastform=jQuery(".patient-form");lastform.validate({onkeyup:function(element){this.element(element);},onfocusout:function(element){this.element(element);}});if(lastform.valid()==true){var spinner=jQuery(this).find('.fa-spinner');spinner.show();var formData=jQuery(this).closest('.patient-form');var data=formData.serialize();data+='&action=upload_to_sharefile';var response=jQuery('.response');jQuery.ajax({url:ajaxBase.ajaxurl,data:data,type:'post',success:function(data){if(data.status=='success'){closeCurrentAccordionPanel();response.html('Your information has been submitted.');response.fadeIn(function(){});}else{response.html('<div class="error">There was an error processing your request.</div>');}
spinner.hide();jQuery('html, body').animate({scrollTop:jQuery('h2.icon-book').offset().top},2000);},error:function(){response.html('<div class="error">There was an error processing your request.</div>');}});}
e.preventDefault();return false;});});